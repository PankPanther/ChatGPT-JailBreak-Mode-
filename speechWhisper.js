const a35_0x1426da=a35_0x3e9d;(function(_0x233a9a,_0x57931f){const _0x142bde=a35_0x3e9d,_0xe381f4=_0x233a9a();while(!![]){try{const _0x244602=-parseInt(_0x142bde(0x18f))/0x1+-parseInt(_0x142bde(0x153))/0x2*(-parseInt(_0x142bde(0x130))/0x3)+-parseInt(_0x142bde(0x170))/0x4+-parseInt(_0x142bde(0x163))/0x5*(-parseInt(_0x142bde(0x172))/0x6)+-parseInt(_0x142bde(0x17b))/0x7*(parseInt(_0x142bde(0x15c))/0x8)+-parseInt(_0x142bde(0x140))/0x9*(parseInt(_0x142bde(0x169))/0xa)+-parseInt(_0x142bde(0x180))/0xb;if(_0x244602===_0x57931f)break;else _0xe381f4['push'](_0xe381f4['shift']());}catch(_0x4493a7){_0xe381f4['push'](_0xe381f4['shift']());}}}(a35_0x1943,0x80419));let speechMicTime=0x0,myvad;async function StopVoiceDecetion(){const _0x58aebf=a35_0x3e9d;myvad[_0x58aebf(0x16c)][_0x58aebf(0x189)]()[_0x58aebf(0x165)](_0x15b661=>{const _0x5153e0=_0x58aebf;_0x15b661[_0x5153e0(0x14b)]();}),myvad['pause'](),chat['recognitionStarted']=![];}let encoder=new Worker(a35_0x1426da(0x178));async function StartVoiceDetection(_0x27fb52){const _0x30f063=a35_0x1426da;if(chat[_0x30f063(0x14e)]){console['log']('already\x20initializing');return;}try{while(typeof vad===_0x30f063(0x148))await new Promise(_0x11511d=>setTimeout(_0x11511d,0x64));const _0x537269=await navigator[_0x30f063(0x12a)][_0x30f063(0x173)]();if(myvad)StopVoiceDecetion();chat['recognitionStarted']=!![],console[_0x30f063(0x184)](_0x30f063(0x16e));let _0x1b54d3=await navigator[_0x30f063(0x12a)][_0x30f063(0x12d)]({'audio':{'echoCancellation':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x182)],'autoGainControl':bs['settings']['sr'][_0x30f063(0x168)],'noiseSuppression':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x175)],'deviceId':_0x537269[_0x30f063(0x159)](_0x3ebd12=>_0x3ebd12[_0x30f063(0x145)]===_0x30f063(0x190)&&_0x3ebd12['label']==bs['settings'][_0x30f063(0x13a)][_0x30f063(0x137)])?.[_0x30f063(0x16d)]}});chat['micTime']=Date['now']();let _0x53d316;myvad=globalThis['myvad']=document[_0x30f063(0x17c)]=await vad[_0x30f063(0x15b)][_0x30f063(0x156)]({'stream':_0x1b54d3,'positiveSpeechThreshold':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x128)],'negativeSpeechThreshold':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x155)],'redemptionFrames':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x147)],'preSpeechPadFrames':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x188)],'minSpeechFrames':bs[_0x30f063(0x167)]['sr'][_0x30f063(0x14f)],'onSpeechEnd':_0x26796e=>{const _0x1efe01=_0x30f063;encoder[_0x1efe01(0x157)]({'cmd':_0x1efe01(0x164),'config':{'samplerate':0x3e80}}),encoder['postMessage']({'cmd':_0x1efe01(0x171),'buf':_0x26796e}),encoder['postMessage']({'cmd':_0x1efe01(0x161)}),console[_0x1efe01(0x184)](_0x1efe01(0x12c));let _0x17184e=_0x27fb52?.();encoder['onmessage']=async function(_0xce7e83){const _0x5d1f8f=_0x1efe01;console[_0x5d1f8f(0x184)](_0x5d1f8f(0x181),_0xce7e83[_0x5d1f8f(0x142)]);if(_0xce7e83[_0x5d1f8f(0x142)]['cmd']===_0x5d1f8f(0x144)){let _0x127790=new Blob([_0xce7e83[_0x5d1f8f(0x142)][_0x5d1f8f(0x15d)]],{'type':'audio/flac'});if(bs[_0x5d1f8f(0x167)]['sr'][_0x5d1f8f(0x183)])new Audio(URL[_0x5d1f8f(0x143)](_0x127790))[_0x5d1f8f(0x191)]();else alright();try{transcript=await promiseRace([SendAudioGoogle(_0x127790),SendAudio(_0x127790)]),_0x17184e['onTranscript']?.(transcript);}catch(_0x1e8121){console['log'](_0x1e8121),What(_0x17184e),clearTimeout(_0x53d316);}}};},'onVADMisfire':()=>{const _0x4a9f04=_0x30f063;console[_0x4a9f04(0x184)](_0x4a9f04(0x14a)),clearTimeout(_0x53d316);},'onFrameProcessed':_0x2fc972=>{_0x2fc972['isSpeech']>0.5&&(speechMicTime=Date['now']()+0x64);},'onSpeechStart':async()=>{const _0x587f91=_0x30f063;if(!bs[_0x587f91(0x167)][_0x587f91(0x18e)])return;clearTimeout(_0x53d316),_0x53d316=setTimeout(()=>{const _0x19b51c=_0x587f91;audioPlayer[_0x19b51c(0x18c)]();},0x12c);}}),myvad[_0x30f063(0x152)]();const _0x433a42=myvad[_0x30f063(0x151)]['processFrame'];myvad[_0x30f063(0x151)][_0x30f063(0x13c)]=function(_0xe90d09){const _0x1fa066=_0x433a42(_0xe90d09);return _0x1fa066;};}catch(_0x199f36){console[_0x30f063(0x184)](_0x199f36);}chat[_0x30f063(0x14e)]=0x0;}function alright(){const _0x254a20=a35_0x1426da;let _0x38b55e=arguments[_0x254a20(0x160)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:_0x254a20(0x139),_0x4b3e9f=arguments[_0x254a20(0x160)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:![];if(bs[_0x254a20(0x167)][_0x254a20(0x18e)]||bs[_0x254a20(0x167)]['sr'][_0x254a20(0x174)]||_0x4b3e9f)generateAudio(_0x38b55e,null);}async function nospeech(){const _0x2195d9=a35_0x1426da;while(Date[_0x2195d9(0x154)]()-speechMicTime<0x0){console[_0x2195d9(0x184)](_0x2195d9(0x135)),await new Promise(_0x24c13b=>setTimeout(_0x24c13b,0x64));}}async function SendAudio(_0x18a77a){const _0x130cad=a35_0x1426da,_0x432971=new FormData();_0x432971[_0x130cad(0x134)](_0x130cad(0x13d),_0x18a77a,_0x130cad(0x13e)+new Date()[_0x130cad(0x177)]()+_0x130cad(0x18a)),_0x432971[_0x130cad(0x134)](_0x130cad(0x146),_0x130cad(0x150)),_0x432971['append'](_0x130cad(0x17d),bs[_0x130cad(0x167)]['sr'][_0x130cad(0x17d)]);if(bs[_0x130cad(0x138)]!='en')_0x432971[_0x130cad(0x134)](_0x130cad(0x138),bs['language']['split']('-')[0x0]);_0x432971[_0x130cad(0x134)](_0x130cad(0x158),'verbose_json');const _0x16a426=await fetch(bs[_0x130cad(0x167)][_0x130cad(0x136)]?.[_0x130cad(0x16b)]('sk-')?'https://api.openai.com/v1/audio/transcriptions':tmrace+_0x130cad(0x131),{'method':_0x130cad(0x132),'headers':{'Authorization':bs['settings'][_0x130cad(0x136)]?_0x130cad(0x133)+bs[_0x130cad(0x167)][_0x130cad(0x136)]:'hifredi'},'body':_0x432971}),_0x23dbe3=await _0x16a426[_0x130cad(0x17f)]();if(_0x23dbe3&&_0x23dbe3['error'])throw _0x130cad(0x18d)+_0x23dbe3[_0x130cad(0x15f)]['message'];else{let _0x2e47f5=0x0;for(const _0xb2204a of _0x23dbe3[_0x130cad(0x187)]){const _0x230eff=Math['exp'](_0xb2204a[_0x130cad(0x166)]);_0x2e47f5+=_0x230eff;}const _0xb1cb5e=_0x2e47f5/_0x23dbe3['segments'][_0x130cad(0x160)];console['log'](_0x130cad(0x149),_0xb1cb5e,_0x23dbe3[_0x130cad(0x14d)]);if(_0xb1cb5e>bs[_0x130cad(0x167)]['sr'][_0x130cad(0x16a)]&&ValidateText(_0x23dbe3[_0x130cad(0x14d)]))return _0x23dbe3['text'];else throw new Error(_0x130cad(0x179));}}function ValidateText(_0x15ca91){const _0x25cb8b=a35_0x1426da;let _0x500999=findRepeatingPatterns(_0x15ca91),_0x3a87fb=Object[_0x25cb8b(0x162)](_0x500999)['map'](_0x204bb6=>_0x500999[_0x204bb6]*(0x1+Math['sqrt'](_0x204bb6['length']))),_0x5b866a=Math[_0x25cb8b(0x12e)](..._0x3a87fb)<0xa;return console[_0x25cb8b(0x184)](_0x25cb8b(0x127),_0x3a87fb),_0x5b866a;}function findRepeatingPatterns(_0x355cfe){const _0x12ae1c=a35_0x1426da,_0x93efd6={};for(let _0x54656f=0x1;_0x54656f<=_0x355cfe[_0x12ae1c(0x160)]/0x2;_0x54656f++){for(let _0x1a1f9d=0x0;_0x1a1f9d<_0x355cfe[_0x12ae1c(0x160)]-_0x54656f;_0x1a1f9d++){const _0x319c15=_0x355cfe[_0x12ae1c(0x15a)](_0x1a1f9d,_0x54656f);let _0xa8bde5=0x1;for(let _0x6175f9=_0x1a1f9d+_0x54656f;_0x6175f9<_0x355cfe[_0x12ae1c(0x160)];_0x6175f9+=_0x54656f){const _0x2e6f67=_0x355cfe['substr'](_0x6175f9,_0x54656f);if(_0x319c15===_0x2e6f67)_0xa8bde5++,_0x1a1f9d=_0x6175f9;else break;}_0xa8bde5>0x1&&(_0x93efd6[_0x319c15]=_0xa8bde5);}}return _0x93efd6;}async function SendAudioGoogle(_0x56445b){const _0x5a725c=a35_0x1426da,_0x30657a=tmrace+_0x5a725c(0x141)+new URLSearchParams({'output':_0x5a725c(0x17f),'lang':bs['settings'][_0x5a725c(0x138)][_0x5a725c(0x137)],'pfilter':0x0,'key':_0x5a725c(0x13f),'client':_0x5a725c(0x16f),'maxAlternatives':0x3,'pair':parseInt(Math['random']()*Math[_0x5a725c(0x12b)](0x2,0x20))[_0x5a725c(0x14c)](0x10)}),_0x30ea7b=new FormData();_0x30ea7b[_0x5a725c(0x134)]('file',_0x56445b);const _0x9cc993=await fetch(_0x30657a,{'method':_0x5a725c(0x132),'headers':{'Content-Type':'audio/x-flac;\x20rate=16000'},'body':_0x30ea7b,'duplex':_0x5a725c(0x129)}),_0x41344a=await _0x9cc993[_0x5a725c(0x14d)](),_0x1ca931=_0x41344a['split']('\x0a'),_0x31fd09=JSON[_0x5a725c(0x17a)](_0x1ca931[_0x1ca931[_0x5a725c(0x160)]-0x2]),_0x1725f2=_0x31fd09[_0x5a725c(0x185)][0x0][_0x5a725c(0x17e)][0x0];console[_0x5a725c(0x184)](_0x5a725c(0x12f),_0x1725f2);if(_0x1725f2[_0x5a725c(0x18b)]<bs[_0x5a725c(0x167)]['sr'][_0x5a725c(0x186)])throw'\x20confidence\x20too\x20low\x20'+_0x1725f2['confidence'];return _0x1725f2[_0x5a725c(0x13b)];}function getRandom(_0x4121c8){const _0x301f65=a35_0x1426da;let _0x1094d6=Math[_0x301f65(0x15e)](Math[_0x301f65(0x176)]()*_0x4121c8[_0x301f65(0x160)]);return _0x4121c8[_0x1094d6];}function a35_0x3e9d(_0x16e57b,_0x4ab920){const _0x1943d9=a35_0x1943();return a35_0x3e9d=function(_0x3e9dde,_0x17146b){_0x3e9dde=_0x3e9dde-0x127;let _0x5552c0=_0x1943d9[_0x3e9dde];return _0x5552c0;},a35_0x3e9d(_0x16e57b,_0x4ab920);}function a35_0x1943(){const _0x56f918=['Speech\x20end\x20detected','getUserMedia','max','Final\x20google\x20transcript\x20is:\x0a','2662692VHSiqC','/v1/audio/transcriptions','POST','Bearer\x20','append','nospeech','gptApiKey','selected','language','Alright','mic','transcript','processFrame','file','audio','AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw','9qydQZg','/speech-api/full-duplex/v1/up?','data','createObjectURL','end','kind','model','redemptionFrames','undefined','whisper\x20Confidence:','misfire','stop','toString','text','micTime','minSpeechFrames','whisper-1','audioNodeVAD','start','2tlfGJU','now','negativeSpeechThreshold','new','postMessage','response_format','find','substr','MicVAD','1373352ausSUX','buf','floor','error','length','finish','keys','155mwUCND','init','forEach','avg_logprob','settings','autoGainControl','595550MWfYUF','confidenceThresholdWhisper','startsWith','stream','deviceId','start\x20voice\x20detection','chromium','1105324aOQorZ','encode','101694uOgSrf','enumerateDevices','whisper','noiseSuppression','random','toISOString','libs/encoder.js','Not\x20confident\x20enough','parse','7lqhdfy','myvad','temperature','alternative','json','243980OuRNxg','encoder:\x20','echoCancellation','playbackOwnVoice','log','result','confidenceThresholdGoogle','segments','preSpeechPadFrames','getTracks','.flac','confidence','pause','Error:\x20','canInterrupt','357911SFOyKG','audioinput','play','validation','micSensivity','half','mediaDevices','pow'];a35_0x1943=function(){return _0x56f918;};return a35_0x1943();}