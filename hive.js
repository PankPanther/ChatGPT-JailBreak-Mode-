(function(_0xba6104,_0x245fdf){const _0x1487bc=a24_0x45ad,_0x47e7d3=_0xba6104();while(!![]){try{const _0x1f552f=-parseInt(_0x1487bc(0x17a))/0x1+parseInt(_0x1487bc(0x182))/0x2+parseInt(_0x1487bc(0x18b))/0x3*(parseInt(_0x1487bc(0x183))/0x4)+-parseInt(_0x1487bc(0x190))/0x5*(parseInt(_0x1487bc(0x185))/0x6)+-parseInt(_0x1487bc(0x18a))/0x7*(parseInt(_0x1487bc(0x174))/0x8)+-parseInt(_0x1487bc(0x198))/0x9*(parseInt(_0x1487bc(0x19d))/0xa)+-parseInt(_0x1487bc(0x197))/0xb*(-parseInt(_0x1487bc(0x17c))/0xc);if(_0x1f552f===_0x245fdf)break;else _0x47e7d3['push'](_0x47e7d3['shift']());}catch(_0x136fde){_0x47e7d3['push'](_0x47e7d3['shift']());}}}(a24_0x2745,0xf080c));async function GPTL(_0x140d17,_0x101ab8){const _0x479dbc=a24_0x45ad;let {messages:_0xbd3a15}=_0x140d17,_0x25de71=bs['api'][_0x479dbc(0x17d)],_0x31db3f=abortController[_0x479dbc(0x18f)];_0x25de71['prompt']=_0xbd3a15[_0x479dbc(0x194)](_0x2a8916=>!_0x2a8916[_0x479dbc(0x189)])[_0x479dbc(0x191)](_0x9902be=>{const _0x55f86d=_0x479dbc;if(_0x9902be['role']===_0x55f86d(0x171))return bs['contact'][_0x55f86d(0x181)]+':\x20'+_0x9902be[_0x55f86d(0x170)];if(_0x9902be[_0x55f86d(0x19e)]===_0x55f86d(0x17b))return _0x9902be['content'];if(_0x9902be[_0x55f86d(0x19e)]===_0x55f86d(0x192))return bs[_0x55f86d(0x17d)][_0x55f86d(0x199)]+':\x20'+_0x9902be[_0x55f86d(0x170)];})[_0x479dbc(0x193)]('\x0a')+'\x0a'+bs['contact'][_0x479dbc(0x181)]+':';const _0x84a0f5=await fetch(bs[_0x479dbc(0x18c)][_0x479dbc(0x1a1)]+_0x479dbc(0x16f),{'method':_0x479dbc(0x178),'headers':{'accept':_0x479dbc(0x179),'apikey':bs[_0x479dbc(0x18c)][_0x479dbc(0x177)]||_0x479dbc(0x19a),'client-agent':_0x479dbc(0x18e),'content-type':'application/json'},'body':JSON[_0x479dbc(0x196)](_0x25de71)}),_0x340e0f=await _0x84a0f5[_0x479dbc(0x17e)]();if(!_0x340e0f['id'])throw new Error(_0x479dbc(0x1a0));let _0x108335;do{if(_0x31db3f[_0x479dbc(0x172)])return;const _0x1405e3=await fetch(bs[_0x479dbc(0x18c)][_0x479dbc(0x1a1)]+_0x479dbc(0x180)+_0x340e0f['id'],{'method':_0x479dbc(0x19b),'headers':{'accept':_0x479dbc(0x179)}});_0x108335=await _0x1405e3[_0x479dbc(0x17e)]();let _0x32b956=_0x108335[_0x479dbc(0x175)][0x0]?.[_0x479dbc(0x195)]||'',_0x26cd58=bs['userName'];_0x32b956=_0x32b956[_0x479dbc(0x19f)](new RegExp(_0x26cd58+':','i'))[0x0][_0x479dbc(0x19c)](),_0x32b956=_0x32b956['replace'](/<[^>]*>/g,''),_0x32b956=end_trim_to_sentence(_0x32b956,!![]);let _0x2ec1f8={'finish_reason':_0x108335[_0x479dbc(0x18d)],'message':{'content':_0x32b956||_0x479dbc(0x184)+_0x108335[_0x479dbc(0x188)]}};if(_0x32b956)_0x101ab8(_0x2ec1f8);if(_0x108335[_0x479dbc(0x18d)])return _0x2ec1f8;else await new Promise(_0x5c9dc3=>setTimeout(_0x5c9dc3,0x3e8));}while(!_0x108335[_0x479dbc(0x173)]);}function end_trim_to_sentence(_0x9b7ebc){const _0x8f61ae=a24_0x45ad;let _0x56b34e=arguments[_0x8f61ae(0x17f)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:![],_0x11a28c=-0x1,_0xae7d9=['.','!','?','`','*','\x22',')','}','`',']',';'];for(let _0xde56f0=0x0;_0xde56f0<_0xae7d9[_0x8f61ae(0x17f)];++_0xde56f0){_0x11a28c=Math['max'](_0x11a28c,_0x9b7ebc[_0x8f61ae(0x176)](_0xae7d9[_0xde56f0]));}if(_0x56b34e){let _0x13b12a=_0x9b7ebc[_0x8f61ae(0x176)]('\x0a');_0x11a28c=Math['max'](_0x11a28c,_0x13b12a);}if(_0x11a28c>0x0)return _0x9b7ebc[_0x8f61ae(0x187)](0x0,_0x11a28c+0x1)[_0x8f61ae(0x186)]();return _0x9b7ebc[_0x8f61ae(0x186)]();}function a24_0x45ad(_0x4c3c57,_0x18166e){const _0x2745c4=a24_0x2745();return a24_0x45ad=function(_0x45ad1e,_0x20975a){_0x45ad1e=_0x45ad1e-0x16f;let _0x3b32f3=_0x2745c4[_0x45ad1e];return _0x3b32f3;},a24_0x45ad(_0x4c3c57,_0x18166e);}function a24_0x2745(){const _0x2d4ac8=['lastIndexOf','koboldHordeApiKey','POST','*/*','1955763VFBUTM','system','84516DtfINK','settings','json','length','/status/','name','124896FfhrEZ','68tPVDKi','Waiting\x20','12KgfvYp','trimEnd','substring','wait_time','error','1470ZVhMZf','211746vxvpHV','api','finished','KoboldAiLite:17','signal','1070735zhPiwH','map','user','join','filter','text','stringify','9097eEAFle','15966CrwySW','userName','0000000000','GET','trim','10490iaSHJr','role','split','No\x20id','url','/async','content','assistant','aborted','done','70736VHJOiM','generations'];a24_0x2745=function(){return _0x2d4ac8;};return a24_0x2745();}