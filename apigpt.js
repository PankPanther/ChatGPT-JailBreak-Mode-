const a2_0x775efb=a2_0x7099;function a2_0x7099(_0x3c0070,_0x453397){const _0x5843cf=a2_0x5843();return a2_0x7099=function(_0x7099ad,_0x185af1){_0x7099ad=_0x7099ad-0x1a3;let _0x55b238=_0x5843cf[_0x7099ad];return _0x55b238;},a2_0x7099(_0x3c0070,_0x453397);}(function(_0x1219d3,_0x46df11){const _0x3d260e=a2_0x7099,_0x5a7599=_0x1219d3();while(!![]){try{const _0x346484=-parseInt(_0x3d260e(0x1b0))/0x1*(parseInt(_0x3d260e(0x1d0))/0x2)+-parseInt(_0x3d260e(0x1f6))/0x3*(-parseInt(_0x3d260e(0x1c0))/0x4)+parseInt(_0x3d260e(0x1c6))/0x5*(parseInt(_0x3d260e(0x1c4))/0x6)+-parseInt(_0x3d260e(0x1e7))/0x7*(-parseInt(_0x3d260e(0x1d1))/0x8)+-parseInt(_0x3d260e(0x1e3))/0x9*(parseInt(_0x3d260e(0x1ab))/0xa)+parseInt(_0x3d260e(0x1b2))/0xb+-parseInt(_0x3d260e(0x1d8))/0xc*(parseInt(_0x3d260e(0x1b8))/0xd);if(_0x346484===_0x46df11)break;else _0x5a7599['push'](_0x5a7599['shift']());}catch(_0x1c7988){_0x5a7599['push'](_0x5a7599['shift']());}}}(a2_0x5843,0x55783));async function GPT(_0x254905){const _0x24cf48=a2_0x7099;let {messages:_0x9a571e,useVision:useVision=!bs['settings'][_0x24cf48(0x1ee)]&&_0x9a571e[_0x24cf48(0x1af)](_0x3c21f1=>_0x3c21f1[_0x24cf48(0x1aa)]=='user'&&_0x3c21f1['content']?.[_0x24cf48(0x1af)]?.(_0x43aed6=>_0x43aed6['type']=='image_url')),openRouter:openRouter=bs[_0x24cf48(0x1ca)][_0x24cf48(0x1da)]?.['startsWith'](_0x24cf48(0x1e8)),stream:stream=!![],forceGPT:_0x107224,model:model=useVision?_0x24cf48(0x1a6):bs[_0x24cf48(0x1ca)][_0x24cf48(0x1cd)]||bs[_0x24cf48(0x1cb)][_0x24cf48(0x1b1)]||(openRouter?_0x107224?_0x24cf48(0x1a6):_0x24cf48(0x1bd):_0x107224?_0x24cf48(0x1d6):'gpt-3.5-turbo'),functions:_0x3c664b,apikey:apikey=bs[_0x24cf48(0x1ca)][_0x24cf48(0x1da)],apiUrl:apiUrl=bs[_0x24cf48(0x1ca)][_0x24cf48(0x1b9)]||bs[_0x24cf48(0x1cb)][_0x24cf48(0x1ec)]}=_0x254905,_0x1957cb=arguments[_0x24cf48(0x1a4)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:_0x57a882=>{},_0xd9d184=arguments[_0x24cf48(0x1a4)]>0x2&&arguments[0x2]!==undefined?arguments[0x2]:0x0;logEventOnce(_0x24cf48(0x1d4));try{if(_0xd9d184>0x3)throw new Error(_0x24cf48(0x1dd));let _0x435679=abortController?.['signal'];(!_0x435679||_0x435679[_0x24cf48(0x1f3)])&&(abortController=new AbortController(),_0x435679=abortController[_0x24cf48(0x1ae)]);var _0x231521=_0x107224||apikey||apiUrl||isApp;if(!_0x231521)throw new Error('switching\x20to\x20hf');const _0x5085ea=new TextDecoder();console[_0x24cf48(0x1e1)](_0x24cf48(0x1f7),clone(_0x9a571e),clone(_0x3c664b||''));if(_0x3c664b?.['length']==0x0)_0x3c664b=undefined;if(useVision)_0x3c664b=undefined;const _0x19ce8a={'Content-Type':_0x24cf48(0x1df)};if(useVision)_0x9a571e=_0x9a571e['filter'](_0x24c267=>_0x24c267[_0x24cf48(0x1aa)]!==_0x24cf48(0x1cf));let _0x477ac4=bs[_0x24cf48(0x1ca)][_0x24cf48(0x1ac)];_0x477ac4=replaceEmptyStringWithUndefined(_0x477ac4);let _0x5cef12=JSON[_0x24cf48(0x1e9)]({'messages':_0x9a571e[_0x24cf48(0x1c3)](_0x19b4f3=>!_0x19b4f3['error']),'max_tokens':useVision||apiUrl&&!bs[_0x24cf48(0x1cb)][_0x24cf48(0x1ec)]?bs[_0x24cf48(0x1ca)][_0x24cf48(0x1bf)]:undefined,'stream':stream,'model':model,'functions':_0x3c664b,'additional':{'authToken':bs[_0x24cf48(0x1ca)][_0x24cf48(0x1c2)],'openrouter':bs['settings'][_0x24cf48(0x1e2)]},'frequency_penalty':_0x477ac4[_0x24cf48(0x1d7)],'presence_penalty':_0x477ac4[_0x24cf48(0x1b7)],'temperature':_0x477ac4[_0x24cf48(0x1e6)],'top_p':_0x477ac4[_0x24cf48(0x1a8)]},(_0x4c80ee,_0x2888e3)=>_0x4c80ee==='template'||_0x4c80ee[0x0]==='_'?undefined:_0x2888e3);_0x19ce8a[_0x24cf48(0x1be)]=apikey?_0x24cf48(0x1ea)+apikey:apiUrl?undefined:isApp?_0x24cf48(0x1b6):'kg'+generateHash(_0x5cef12);let _0xbef74a;_0xbef74a=await fetch(apiUrl||tmrace+_0x24cf48(0x1ba),{'headers':_0x19ce8a,'method':_0x24cf48(0x1b4),'body':_0x5cef12,'signal':_0x435679});if(useVision)chat[_0x24cf48(0x1ad)][_0x24cf48(0x1ce)](_0x3bc09f=>{const _0x3c12f3=_0x24cf48;if(Array['isArray'](_0x3bc09f[_0x3c12f3(0x1e4)]))_0x3bc09f[_0x3c12f3(0x1e4)]=_0x3bc09f[_0x3c12f3(0x1e4)][_0x3c12f3(0x1cc)](_0x198eda=>_0x198eda[_0x3c12f3(0x1a7)]==_0x3c12f3(0x1dc))?.[_0x3c12f3(0x1dc)]||'';});if(_0xbef74a['ok']){}else{let _0x435ae5=await _0xbef74a['text']();if(_0xbef74a[_0x24cf48(0x1f5)]===0x19d||_0x435ae5['includes']('maximum\x20context\x20length'))return bs['settings'][_0x24cf48(0x1a5)]/=0x2,await GPT({'messages':_0x9a571e,'stream':stream,'model':model,'functions':_0x3c664b,'useVision':useVision,'openRouter':openRouter},_0x1957cb,_0xd9d184+0x1);logEventOnce(_0x24cf48(0x1a9),{'error':_0x435ae5});throw new Error(_0x435ae5);}const _0x47f59e=_0xbef74a[_0x24cf48(0x1b5)][_0x24cf48(0x1ed)]();let _0x277eed='',_0x13f967={'message':{}};while(!![]){const {done:_0x192722,value:_0x16b39d}=await _0x47f59e[_0x24cf48(0x1c8)]({'signal':_0x435679});if(_0x192722)break;_0x277eed+=_0x5085ea[_0x24cf48(0x1ef)](_0x16b39d);const _0x5bcef8=_0x277eed[_0x24cf48(0x1eb)]('\x0a');_0x277eed=_0x5bcef8[_0x24cf48(0x1c7)]();for(const _0x1c764b of _0x5bcef8){if(_0x1c764b[_0x24cf48(0x1c9)]('data:\x20')){if(_0x1c764b[_0x24cf48(0x1a3)](0x6)===_0x24cf48(0x1f0))return console[_0x24cf48(0x1e1)]('gpt\x20response\x20',_0x1c764b),_0x13f967;let _0x2930a3=JSON['parse'](_0x1c764b[_0x24cf48(0x1a3)](0x6)),_0x999d66=_0x2930a3[_0x24cf48(0x1f4)]?.[0x0];if(_0x2930a3[_0x24cf48(0x1de)]?.[_0x24cf48(0x1c1)])throw new Error(_0x2930a3[_0x24cf48(0x1de)][_0x24cf48(0x1d9)]);if(!_0x999d66)continue;_0x13f967[_0x24cf48(0x1d9)]=combineJSON(_0x13f967['message'],_0x999d66[_0x24cf48(0x1d2)]),_0x13f967={..._0x13f967,..._0x999d66},_0x1957cb(_0x13f967);}}}let _0x339d18=await _0xbef74a[_0x24cf48(0x1db)]();return console[_0x24cf48(0x1e1)](_0x24cf48(0x1f8),clone(_0x339d18)),_0x1957cb(_0x339d18),_0x339d18;}catch(_0x187421){if(!_0x107224)return await GPTHF({'messages':_0x9a571e,'stream':stream,'model':model,'functions':_0x3c664b},_0x1957cb);else throw _0x187421;}}LoadComponent(a2_0x775efb(0x1b3),globalThis[a2_0x775efb(0x1d5)]);function combineJSON(_0xf5c505,_0x305ccb){const _0x29b009=a2_0x775efb;var _0x1e6c2f={};for(var _0xac732c in _0xf5c505){_0xf5c505[_0x29b009(0x1e0)](_0xac732c)&&_0x305ccb[_0x29b009(0x1e0)](_0xac732c)&&_0xf5c505[_0xac732c]!==_0x305ccb[_0xac732c]?typeof _0xf5c505[_0xac732c]===_0x29b009(0x1f1)&&typeof _0x305ccb[_0xac732c]===_0x29b009(0x1f1)?_0x1e6c2f[_0xac732c]=combineJSON(_0xf5c505[_0xac732c],_0x305ccb[_0xac732c]):_0x1e6c2f[_0xac732c]=_0xf5c505[_0xac732c]+_0x305ccb[_0xac732c]:_0x1e6c2f[_0xac732c]=_0xf5c505[_0xac732c];}for(var _0xac732c in _0x305ccb){!_0x1e6c2f['hasOwnProperty'](_0xac732c)&&(_0x1e6c2f[_0xac732c]=_0x305ccb[_0xac732c]);}return _0x1e6c2f;}function LimitMessages(_0x4217af,_0x1f5e68){const _0x4bfe64=a2_0x775efb;let _0x91acdc=_0x4217af[_0x4bfe64(0x1d3)]((_0x3f3d6a,_0x40f881)=>_0x3f3d6a+(_0x40f881[_0x4bfe64(0x1e4)]?.[_0x4bfe64(0x1a4)]||0x0),0x0);if(_0x91acdc>_0x1f5e68){functions=undefined,_0x4217af=_0x4217af[_0x4bfe64(0x1c3)](_0x1733fd=>_0x1733fd['content']);for(let _0x445107=0x0;_0x445107<0x88b8&&_0x91acdc>_0x1f5e68;_0x445107++){_0x4217af=removeNumberFromMiddle(_0x4217af),_0x91acdc=_0x4217af['reduce']((_0x1dc1bf,_0x5c096a)=>_0x1dc1bf+_0x5c096a['content'][_0x4bfe64(0x1a4)],0x0);}}return _0x4217af;}function a2_0x5843(){const _0xfa7cfc=['Authorization','max_tokens','4CzqNQK','code','loginToken','filter','2079240sCoRhB','indexOf','5oKGFue','pop','read','startsWith','settings','contact','find','gptModelName','forEach','function','9834oHKCjm','58552YQSYcA','delta','reduce','lmp-gpt','adShadowRoot','google/gemini-flash-1.5','frequency_penalty','48haLsAw','message','gptApiKey','json','text','Please\x20visit\x20https://discord.gg/88fQT5Bgfe\x20and\x20get\x20free\x20Api\x20Key.\x20','error','application/json','hasOwnProperty','log','openRouterApiKey','3474fbIDif','content','trim','temperature','574ECVRgH','sk-or-v1','stringify','Bearer\x20','split','apiUrl','getReader','useLava','decode','[DONE]','object','Removed\x20string:','aborted','choices','status','1020381oQzzcv','gpt\x20request','non\x20streaming\x20response\x20','substring','length','maxSymbolsInChat','anthropic/claude-3-haiku','type','top_p','lmp-gpt-error-gpt','role','3090UvnUbQ','llmParams','messages','signal','some','101sbQIwE','apiModel','4533947pZQIIW','components/limitPopup.html','POST','body','Bearer\x20app','presence_penalty','2382341umLrsj','gptApiUrl','/v1/chat/completions','lastIndexOf','floor','mistralai/mixtral-8x7b-instruct'];a2_0x5843=function(){return _0xfa7cfc;};return a2_0x5843();}function removeNumberFromMiddle(_0x316f2b){const _0x1569cf=a2_0x775efb;let _0x2694d2=_0x316f2b[_0x1569cf(0x1d3)]((_0x2df478,_0x47feb1)=>_0x2df478+_0x47feb1[_0x1569cf(0x1e4)][_0x1569cf(0x1a4)],0x0),_0x3ba06f=Math[_0x1569cf(0x1bc)](_0x2694d2/0x2),_0x170e8b=0x0,_0x5efc6b=0x0,_0x1b9f1a;for(let _0x588d68=0x0;_0x588d68<_0x316f2b[_0x1569cf(0x1a4)];_0x588d68++){if(_0x170e8b+_0x316f2b[_0x588d68][_0x1569cf(0x1e4)][_0x1569cf(0x1a4)]>=_0x3ba06f){_0x5efc6b=_0x588d68,_0x1b9f1a=_0x316f2b[_0x588d68]['content'];break;}_0x170e8b+=_0x316f2b[_0x588d68]['content'][_0x1569cf(0x1a4)];}let _0x1a43c1=_0x1b9f1a[_0x1569cf(0x1a4)]/0x2,_0x44f56d=_0x1b9f1a[_0x1569cf(0x1bb)]('\x0a',_0x1a43c1-0x1),_0x406e19=_0x1b9f1a[_0x1569cf(0x1c5)]('\x0a',_0x1a43c1);_0x406e19===-0x1&&(_0x406e19=_0x1b9f1a['length']);let _0x10b662=_0x1b9f1a[_0x1569cf(0x1a3)](_0x44f56d+0x1,_0x406e19+0x1);console[_0x1569cf(0x1e1)](_0x1569cf(0x1f2),_0x10b662);let _0x520d8f=_0x1b9f1a[_0x1569cf(0x1a3)](0x0,_0x44f56d+0x1)+_0x1b9f1a['substring'](_0x406e19+0x1);return _0x316f2b[_0x5efc6b][_0x1569cf(0x1e4)]=_0x520d8f[_0x1569cf(0x1e5)](),_0x316f2b=_0x316f2b[_0x1569cf(0x1c3)](_0x388476=>_0x388476[_0x1569cf(0x1e4)]!==''),_0x316f2b;}